/*
* This is a manifest file that'll automatically include all the stylesheets available in this directory
* and any sub-directories. You're free to add application-wide styles to this file and they'll appear at
* the top of the compiled file, but it's generally better to create a new file per style scope.
*= require_self
*= require_tree . 
*/

// VARIABLES
$menu-bar-item-horizontal-padding: 7px;
$menu-bar-item-height: 26px;
$menu-bar-item-border-color: #BBBBBB;
$menu-bar-item-border-shadow-color: #888888;
$menu-bar-item-border-width: 1px;
$menu-bar-item-text-color: #333;
$menu-bar-item-disabled-text-color: #888;
$menu-bar-item-spacing: 10px;
$menu-bar-height: 2*$menu-bar-item-border-width + $menu-bar-item-height;
$menu-bar-font: bold 12px 'Arial', 'sans-serif';
$menu-bar-item-zindex: 1;
// MIXINS
@mixin menu_bar_item{
    @include menu_bar_item_base;
    @include menu_bar_item_hover;
    @include menu_bar_item_pressed;
    @include menu_bar_item_disabled;
}
@mixin menu_bar_item_base{
    background: #dddede;
    background: -moz-linear-gradient(top, #fefefe 0%, #dddede 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#fefefe), color-stop(100%,#dddede));
    background: -webkit-linear-gradient(top, #fefefe 0%,#dddede 100%);
    background: linear-gradient(top, #fefefe 0%,#dddede 100%);
    background-image: -ms-linear-gradient(bottom, #fefefe 0%, #dddede 100%);

    border-color: $menu-bar-item-border-color $menu-bar-item-border-color $menu-bar-item-border-shadow-color;
    border-radius: 2px 2px 2px 2px;
    border-style: solid;
    border-width: $menu-bar-item-border-width;
    font: $menu-bar-font;
    line-height: $menu-bar-item-height;
    padding: 0 $menu-bar-item-horizontal-padding;
    white-space: nowrap;
    text-shadow: 0 1px 1px white;
    // Place the button above any nested menu
    position: relative;
    z-index: $menu-bar-item-zindex;
    cursor: pointer;

    *{
        margin: 0;
        padding: 0;
    }

    img{
        vertical-align: top;
    }

    a, label{
        text-decoration: none;        
        margin: -$menu-bar-item-horizontal-padding;
        padding: $menu-bar-item-horizontal-padding;
    }
    a:link, a:visited{
        color: $menu-bar-item-text-color;
    }

    // Hide the inputs without making them display none. IE doesn't click them if they are display none.
    input[type='submit']{
        position: absolute;
        z-index: -1;
        left: -9999px;
    }    
}
@mixin menu_bar_item_hover{
    &:hover{
        border-color: #888;
        // Make the button border appear even when in a group by popping the button up above its siblings
        z-index: 1;
        position: relative;
    }
}
@mixin menu_bar_item_pressed{
    &:active, &.selected{
        background: #f0f0f0;
        background: -moz-linear-gradient(top, #f0f0f0 0%, #cccdcd 100%);
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f0f0f0), color-stop(100%,#cccdcd));
        background: -webkit-linear-gradient(top, #f0f0f0 0%,#cccdcd 100%);
        background: linear-gradient(top, #f0f0f0 0%,#cccdcd 100%);                

        box-shadow: 0 0 5px rgba(0,0,0,0.5) inset;

        // Make the button border appear even when in a group by popping the button up above its siblings
        z-index: 1;
        position: relative;
        border-color: #888;
    }    
}

@mixin menu_bar_item_disabled{
    &.disabled, &.disabled a{
        color: $menu-bar-item-disabled-text-color;
    } 
}

@mixin text-field{
    border-radius: 2px;
    border: 1px solid #AAA;
    height: $menu-bar-height;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    margin: 0;
    padding: 0 $menu-bar-item-horizontal-padding;
}


$menu-item-vertical-padding: 0.5em;
$menu-item-horizontal-padding: 1em;
@mixin menu_item{
    @include menu_item_base;
    @include menu_item_hover;
}

@mixin menu_item_base{
    white-space: nowrap;
    font: $menu-bar-font;
    padding: $menu-item-vertical-padding $menu-item-horizontal-padding;
    
    a{
        color: $menu-bar-item-text-color;
        padding: $menu-item-vertical-padding $menu-item-horizontal-padding;
        margin: (-$menu-item-vertical-padding) (-$menu-item-horizontal-padding);
        display: block;
    }
}
@mixin menu_item_hover{    
    a:hover{
        color: white;
        background: #94A6F4;
        background: -moz-linear-gradient(top, #AFCDF6 0%, #94A6F4 100%);
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#AFCDF6), color-stop(100%,#94A6F4));
        background: -webkit-linear-gradient(top, #AFCDF6 0%,#94A6F4 100%);
        background: linear-gradient(top, #AFCDF6 0%,#94A6F4 100%);
        background-image: -ms-linear-gradient(bottom, #AFCDF6 0%, #94A6F4 100%);
    }
}



// STYLES
.menu_bar{
    display: block;
    margin: 0;
    padding: 0;
    list-style: none;
    height: $menu-bar-height;

    .menu_bar_content{
        display: inline-block;
        vertical-align: top;
        margin: 0 $menu-bar-item-spacing 0 0;

        &.first_group_item + .grouped,
        &.grouped + .grouped{
            margin-left: -$menu-bar-item-spacing - $menu-bar-item-border-width;
        }

        .menu_bar_item{
            @include menu_bar_item;
        }

        // MENUS
        .menu{
            background: none repeat scroll 0 0 white;
            border: 1px solid $menu-bar-item-border-color;
            border-radius: 0 0 2px 2px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
            list-style: none outside none;
            margin-top: -1px;
            padding: 0;
            position: absolute;
            display: none;
            
            .menu_item{
                @include menu_item;
            }
        }
        &:hover .menu{
            display: block;
        }
        

        // CLICK BLOCKER
        position: relative; // So click blocker can fill the button area
        .click_blocker{
            height: 100%;
            left: 0;
            position: absolute;
            top: 0;
            width: 100%;
            z-index: $menu-bar-item-zindex + 1;
        }

        // INPUTS IN THE MENU
        input[type=search]{
            @include text-field;
            -webkit-appearance: textfield;
            -webkit-padding-start: 0;
            -webkit-padding-end: 0;
        }
        input[type=text]{
            @include text-field;
        }
        input[type='checkbox']{
            vertical-align: middle;
        }
        select{
            @include menu_bar_item_base;
            @include menu_bar_item_hover;
            height: $menu-bar-height;
            font: $menu-bar-font;
            padding: 0.4em;

            option{
                text-shadow: none;
                padding: 0.4em;
            }
        }        
    }
}
.menu_bar.toggle_menu{
    .menu_bar_content:first-child .menu_bar_item{
        border-top-left-radius: 14px;
        border-bottom-left-radius: 14px;
    }
    .menu_bar_content:last-child .menu_bar_item{
        border-top-right-radius: 14px;
        border-bottom-right-radius: 14px;
    }    
}